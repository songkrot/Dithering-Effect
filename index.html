<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dithering</title>
    <link rel="icon" type="image/x-icon" href="img/fav.png">
    <style>
      body {
        padding: 0;
        margin: 0;
        overflow: hidden;
      }

      .pattern__overlay {
        position: absolute;
        mix-blend-mode: overlay;
        filter: brightness(100%) contrast(1000%) saturate(1000%) sepia(100%);
        width: 100vw;
        height: 100vh;
        top: 0;
        left: 0;
      }

      .pattern__overlay img {
        position: absolute;
        mix-blend-mode: overlay;
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .background__img {
        width: 100vw;
        height: 100vh;
        overflow: hidden;
        position: relative;
      }

      .background__img img {
        width: 110vw; /* ทำให้ใหญ่กว่าหน้าจอ จะได้มีพื้นที่ขยับ */
        height: 110vh;
        object-fit: cover;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        will-change: transform;
      }
    </style>
  </head>
  <body>
    <div class="pattern__overlay">
      <img src="img/bayer.png" alt="bayer pattern" />
      <div class="background__img">
        <img src="img/cat.jpg" alt="cat image" />
      </div>
    </div>

    <script>
      const bg = document.querySelector(".background__img img");

      let targetX = 0,
        targetY = 0;
      let currentX = 0,
        currentY = 0;

      document.addEventListener("mousemove", (e) => {
        const { innerWidth, innerHeight } = window;
        const x = (e.clientX - innerWidth / 2) / innerWidth;
        const y = (e.clientY - innerHeight / 2) / innerHeight;

        // ค่า parallax (ปรับ -80 ได้ตามต้องการ)
        targetX = x * -80;
        targetY = y * -80;
      });

      function animate() {
        // easing (lerp)
        currentX += (targetX - currentX) * 0.05;
        currentY += (targetY - currentY) * 0.05;

        bg.style.transform = `translate(-50%, -50%) translate(${currentX}px, ${currentY}px)`;

        requestAnimationFrame(animate);
      }

      animate();
    </script>
  </body>
</html>
